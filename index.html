<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Y5 BMK EJAAN APR</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#4F46E5',
        secondary: '#6366F1'
      },
      borderRadius: {
        'none': '0px',
        'sm': '2px',
        DEFAULT: '4px',
        'md': '8px',
        'lg': '12px',
        'xl': '16px',
        '2xl': '20px',
        '3xl': '24px',
        'full': '9999px',
        'button': '4px'
      }
    }
  }
}
</script>
<style>
  body {
    min-height: 1024px;
    background: #f8fafc;
    font-family: 'Inter', sans-serif;
  }
  .container {
    max-width: 1440px;
    margin: 0 auto;
    padding: 20px;
  }
  .game-title {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    font-size: 36px;
    color: #4F46E5;
    text-align: center;
    margin-bottom: 20px;
  }
  .group-select {
    margin-bottom: 20px;
    text-align: center;
  }
  .group-select select {
    padding: 10px;
    font-size: 16px;
    border-radius: 8px;
    border: 2px solid #4F46E5;
    cursor: pointer;
  }
  .game-area {
    background: white;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  }
  .chinese-meaning {
    font-size: 32px;
    text-align: center;
    margin-bottom: 20px;
    color: #1e293b;
    cursor: pointer;
    transition: color 0.3s;
  }
  .chinese-meaning:hover {
    color: #4F46E5;
  }
  .letter-container {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 20px;
  }
  .letter-box {
    width: 50px;
    height: 50px;
    background: #4F46E5;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    color: white;
    cursor: pointer;
    transform-style: preserve-3d;
    transform: perspective(1000px) rotateX(10deg);
    transition: all 0.3s;
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.2);
  }
  .letter-box:hover {
    transform: perspective(1000px) rotateX(0deg) translateY(-5px);
  }
  .word-construction {
    min-height: 60px;
    border: 2px dashed #e2e8f0;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
    display: flex;
    gap: 6px;
    justify-content: center;
    align-items: center;
  }
  .progress-container {
    margin-bottom: 15px;
  }
  .progress-bar {
    height: 6px;
    background: #e2e8f0;
    border-radius: 4px;
    overflow: hidden;
  }
  .progress {
    height: 100%;
    background: #4F46E5;
    transition: width 0.3s;
  }
  .word-counter {
    text-align: center;
    color: #64748b;
    margin-top: 6px;
  }
  .lives {
    display: flex;
    gap: 6px;
    justify-content: center;
    margin-bottom: 15px;
  }
  .heart {
    color: #ef4444;
    font-size: 20px;
  }
  .controls {
    display: flex;
    gap: 12px;
    justify-content: center;
  }
  .btn {
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
  }
  .btn-primary {
    background: #4F46E5;
    color: white;
  }
  .btn-primary:hover {
    background: #4338ca;
  }
  .stats {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-bottom: 20px;
  }
  .stat-item {
    text-align: center;
  }
  .stat-label {
    color: #64748b;
    font-size: 14px;
  }
  .stat-value {
    font-size: 20px;
    font-weight: 600;
    color: #1e293b;
  }
  @keyframes correct {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
  .correct {
    animation: correct 0.5s ease;
  }
  @media (max-width: 768px) {
    .game-title {
      font-size: 28px;
    }
    .chinese-meaning {
      font-size: 24px;
    }
    .letter-box {
      width: 40px;
      height: 40px;
      font-size: 16px;
    }
    .btn {
      padding: 8px 16px;
      font-size: 14px;
    }
    .stat-value {
      font-size: 18px;
    }
  }
</style>
</head>
<body>
<div class="container">
  <h1 class="game-title">Y5 BMK EJAAN APR</h1>
  <div class="group-select">
    <select id="groupSelect">
      <option value="0">选择组别</option>
      <option value="1">第一组 (8-14)</option>
      <option value="2">第二组 (15-21)</option>
      <option value="3">第三组 (22-28)</option>
      <option value="4">第四组 (1-7)</option>
    </select>
  </div>
  <div class="game-area">
    <div class="stats">
      <div class="stat-item">
        <div class="stat-label">Score</div>
        <div class="stat-value" id="score">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Time</div>
        <div class="stat-value" id="timer">00:00</div>
      </div>
    </div>
    <div class="lives">
      <i class="fas fa-heart heart"></i>
      <i class="fas fa-heart heart"></i>
      <i class="fas fa-heart heart"></i>
    </div>
    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress" style="width: 0%"></div>
      </div>
      <div class="word-counter">0/8</div>
    </div>
    <div class="chinese-meaning-container">
      <div class="chinese-meaning" id="meaning"></div>
      <button class="btn btn-primary" id="pronounceBtn"><i class="fas fa-volume-up"></i></button>
    </div>
    <div class="letter-container" id="letters"></div>
    <div class="word-construction" id="construction"></div>
    <div class="controls">
      <button class="btn btn-primary" id="startBtn">Start Game</button>
      <button class="btn btn-primary" id="timerBtn">Reset Timer</button>
    </div>
  </div>
</div>
<!-- 音频文件 -->
<audio id="bgMusic" loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>
<audio id="correctSound">
  <source src="https://www.soundjay.com/button/beep-01a.mp3" type="audio/mpeg">
</audio>
<audio id="wrongSound">
  <source src="https://www.soundjay.com/button/beep-02.mp3" type="audio/mpeg">
</audio>
<script>
  const groups = [
    [
      { word: "Bebola", meaning: "鱼丸" },
      { word: "Bebuli", meaning: "管形瓶、小药瓶" },
      { word: "Deduit", meaning: "万年青（一种植物）" },
      { word: "Gegelung", meaning: "卷状物" },
      { word: "Kekisi", meaning: "铁花" },
      { word: "Kekunci", meaning: "键盘" },
      { word: "Kekabu", meaning: "棉花" },
      { word: "Kekuda", meaning: "三角架" },
      { word: "Lelabah", meaning: "蜘蛛" },
      { word: "Comot-momot", meaning: "肮脏的" },
      { word: "Compang-camping", meaning: "（衣服）破烂" },
      { word: "Coreng-moreng", meaning: "满是污迹" },
      { word: "Debak-debuk", meaning: "击打声或物件落的声音" },
      { word: "Degap-degup", meaning: "（心脏的）跳动声" },
      { word: "Bebayang", meaning: "影子" },
      { word: "Jejari", meaning: "半径、轮轴" },
      { word: "Peparu", meaning: "肺" },
      { word: "Pepatung", meaning: "蜻蜓" },
      { word: "Pepara", meaning: "棚架" },
      { word: "Rerama", meaning: "蝴蝶" }
    ],
    [
      { word: "Reriang", meaning: "蝉" },
      { word: "Rerambut", meaning: "毛细管" },
      { word: "Sesiku", meaning: "直角尺、曲尺" },
      { word: "Sesungut", meaning: "触角、触须、触手" },
      { word: "Sesumpit", meaning: "吹箭筒" },
      { word: "Tetikus", meaning: "滑鼠" },
      { word: "Tetambak", meaning: "堤、岸" },
      { word: "Tetulang", meaning: "房屋的骨架" },
      { word: "Tetupai", meaning: "楔子" },
      { word: "Lelabi", meaning: "鳖" },
      { word: "Lelabu", meaning: "南瓜、长颈水壶" },
      { word: "Lelayang", meaning: "风筝" },
      { word: "Lelumba", meaning: "海豚" },
      { word: "Jejala", meaning: "网状物" },
      { word: "Dentam-dentum", meaning: "爆竹声（连续的）" },
      { word: "Deram-derum", meaning: "轰隆声" },
      { word: "Desas-desus", meaning: "耳语声或谣言" },
      { word: "Gegak-gempita", meaning: "吵闹的、吵杂的" },
      { word: "Gelap-gelita", meaning: "漆黑" },
      { word: "Gerak-geri", meaning: "行为举止" }
    ],
    [
      { word: "Gilang-gemilang", meaning: "极亮的光、光辉的、灿烂的" },
      { word: "Gilap-gemilap", meaning: "光辉洁白的、闪闪烁烁的" },
      { word: "Gopoh-gapah", meaning: "匆匆忙忙" },
      { word: "Gunung-ganang", meaning: "群山" },
      { word: "Sebahagian", meaning: "一部分" },
      { word: "Semua", meaning: "全部" },
      { word: "Seluruh", meaning: "整个" },
      { word: "Segala", meaning: "一切/所有" },
      { word: "Segelintir", meaning: "一小部分" },
      { word: "Segenap", meaning: "全部" },
      { word: "Sebilangan", meaning: "一部分" },
      { word: "Sesetengah", meaning: "一些" },
      { word: "Sekalian", meaning: "全部" },
      { word: "Para", meaning: "们（复数后缀）" },
      { word: "ertahun-tahun", meaning: "几年" },
      { word: "Setengah", meaning: "一半" },
      { word: "Separuh", meaning: "一半" },
      { word: "Berbagai-bagai", meaning: "各种各样" },
      { word: "Pelbagai", meaning: "各种各样" },
      { word: "Masing-masing", meaning: "各自" }
    ],
    [
      { word: "Setiap", meaning: "每" },
      { word: "Tiap-tiap", meaning: "每" },
      { word: "Ketiga-tiga", meaning: "那三" },
      { word: "Berpuluh-puluh", meaning: "几十" },
      { word: "Beratus-ratus", meaning: "几百" },
      { word: "Beribu-ribu", meaning: "几千" },
      { word: "Berjam-jam", meaning: "几小时" },
      { word: "Berhari-hari", meaning: "几天" },
      { word: "Berminggu-minggu", meaning: "几周（口语：几个礼拜）" },
      { word: "Berbulan-bulan", meaning: "几个月" },
      { word: "tujuan", meaning: "目的" },
      { word: "melahirkan", meaning: "产生" },
      { word: "mewujudkan", meaning: "显示" },
      { word: "mempunyai", meaning: "拥有" },
      { word: "memulangkan", meaning: "还" },
      { word: "memuji", meaning: "称赞" },
      { word: "Mata pelajaran", meaning: "科目" },
      { word: "meminta", meaning: "要求" },
      { word: "menyampaikan", meaning: "传达" },
      { word: "mengutip", meaning: "捡" }
    ]
  ];

  let currentWord = null;
  let currentLetters = [];
  let selectedLetters = [];
  let score = 0;
  let lives = 3;
  let wordIndex = 0;
  let timer = null;
  let seconds = 0;
  let currentGroup = null;
  const meaningElement = document.getElementById('meaning');
  const lettersContainer = document.getElementById('letters');
  const constructionArea = document.getElementById('construction');
  const scoreElement = document.getElementById('score');
  const timerElement = document.getElementById('timer');
  const startBtn = document.getElementById('startBtn');
  const timerBtn = document.getElementById('timerBtn');
  const progressBar = document.querySelector('.progress');
  const wordCounter = document.querySelector('.word-counter');
  const hearts = document.querySelectorAll('.heart');
  const pronounceBtn = document.getElementById('pronounceBtn');
  const bgMusic = document.getElementById('bgMusic');
  const correctSound = document.getElementById('correctSound');
  const wrongSound = document.getElementById('wrongSound');
  const groupSelect = document.getElementById('groupSelect');

  // 设置背景音乐音量
  bgMusic.volume = 0.3; // 音量为30%

  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function startGame() {
    if (!currentGroup) {
      alert("请先选择一个组别！");
      return;
    }
    wordIndex = 0;
    score = 0;
    lives = 3;
    seconds = 0;
    scoreElement.textContent = score;
    updateHearts();
    nextWord();
    startTimer();
    bgMusic.play(); // 播放背景音乐
  }

  function nextWord() {
    if (wordIndex >= currentGroup.length) {
      alert(`Game Over! Final Score: ${score}`);
      startGame();
      return;
    }
    if (timer) clearInterval(timer);
    startTimer();
    currentWord = currentGroup[wordIndex];
    meaningElement.textContent = currentWord.meaning;
    meaningElement.style.cursor = 'pointer';
    meaningElement.onclick = () => playAudio(currentWord.meaning);
    pronounceBtn.onclick = () => playAudio(currentWord.meaning);
    currentLetters = currentWord.word.split('');
    selectedLetters = [];
    const shuffledLetters = shuffleArray([...currentLetters]);
    lettersContainer.innerHTML = '';
    shuffledLetters.forEach(letter => {
      const letterBox = document.createElement('div');
      letterBox.className = 'letter-box';
      letterBox.textContent = letter;
      letterBox.onclick = () => selectLetter(letter, letterBox);
      lettersContainer.appendChild(letterBox);
    });
    constructionArea.innerHTML = '';
    updateProgress();
  }

  // 语音播放功能
  function playAudio(text) {
    if (window.speechSynthesis) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'zh-CN'; // 设置为中文
      window.speechSynthesis.speak(utterance);
    }
  }

  function selectLetter(letter, element) {
    if (selectedLetters.length < currentWord.word.length) {
      selectedLetters.push(letter);
      const letterElement = document.createElement('div');
      letterElement.className = 'letter-box';
      letterElement.textContent = letter;
      constructionArea.appendChild(letterElement);
      element.style.visibility = 'hidden';
      checkWord();
    }
  }

  function checkWord() {
    if (selectedLetters.length === currentWord.word.length) {
      const constructedWord = selectedLetters.join('');
      if (constructedWord === currentWord.word) {
        correctSound.play();
        score += 10;
        scoreElement.textContent = score;
        wordIndex++;
        setTimeout(() => {
          nextWord();
        }, 1000);
      } else {
        wrongSound.play();
        lives--;
        updateHearts();
        if (lives <= 0) {
          alert(`Game Over! Final Score: ${score}`);
          startGame();
        } else {
          setTimeout(() => {
            resetCurrentWord();
          }, 1000);
        }
      }
    }
  }

  function resetCurrentWord() {
    selectedLetters = [];
    constructionArea.innerHTML = '';
    const letterBoxes = lettersContainer.querySelectorAll('.letter-box');
    letterBoxes.forEach(box => {
      box.style.visibility = 'visible';
    });
  }

  function updateHearts() {
    hearts.forEach((heart, index) => {
      if (index < lives) {
        heart.style.display = 'inline-block';
      } else {
        heart.style.display = 'none';
      }
    });
  }

  function startTimer() {
    seconds = 0;
    updateTimerDisplay();
    timer = setInterval(() => {
      seconds++;
      updateTimerDisplay();
    }, 1000);
  }

  function updateTimerDisplay() {
    const minutes = Math.floor(seconds / 60);
    const remainingSeconds = seconds % 60;
    timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
  }

  function resetTimer() {
    if (timer) clearInterval(timer);
    seconds = 0;
    updateTimerDisplay();
  }

  function updateProgress() {
    const progress = (wordIndex / currentGroup.length) * 100;
    progressBar.style.width = `${progress}%`;
    wordCounter.textContent = `${wordIndex}/${currentGroup.length}`;
  }

  // 事件监听
  startBtn.addEventListener('click', startGame);
  timerBtn.addEventListener('click', resetTimer);

  // 组别选择
  groupSelect.addEventListener('change', (e) => {
    const groupIndex = parseInt(e.target.value) - 1;
    if (groupIndex >= 0 && groupIndex < groups.length) {
      currentGroup = groups[groupIndex];
      startGame();
    } else {
      currentGroup = null;
    }
  });

  // 初始化
  updateHearts();
</script>
</body>
</html>